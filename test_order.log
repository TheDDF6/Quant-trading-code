2025-09-01 12:28:41,947 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:28:41,947 - __main__ - INFO - ============================================================
2025-09-01 12:28:41,947 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:28:41,948 - __main__ - INFO - ============================================================
2025-09-01 12:28:41,948 - __main__ - ERROR - 配置文件加载失败: [Errno 2] No such file or directory: 'config/trading_config.json'
2025-09-01 12:28:41,948 - __main__ - ERROR - 测试失败!
2025-09-01 12:28:41,948 - __main__ - INFO - 测试程序结束
2025-09-01 12:29:13,592 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:29:13,592 - __main__ - INFO - ============================================================
2025-09-01 12:29:13,596 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:29:13,596 - __main__ - INFO - ============================================================
2025-09-01 12:29:13,596 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:29:13,596 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:29:14,628 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:29:14,628 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:29:14,628 - __main__ - ERROR - 连接测试异常: 'OKXClient' object has no attribute 'test_connection'
2025-09-01 12:29:14,631 - __main__ - ERROR - 测试失败!
2025-09-01 12:29:14,631 - __main__ - INFO - 测试程序结束
2025-09-01 12:29:26,585 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:29:26,585 - __main__ - INFO - ============================================================
2025-09-01 12:29:26,585 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:29:26,585 - __main__ - INFO - ============================================================
2025-09-01 12:29:26,585 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:29:26,585 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:29:27,618 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:29:27,618 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:29:28,488 - __main__ - ERROR - 连接测试失败: {'code': '0', 'data': [{'adjEq': '', 'availEq': '', 'borrowFroz': '', 'details': [{'accAvgPx': '', 'autoLendAmt': '0', 'autoLendMtAmt': '0', 'autoLendStatus': 'unsupported', 'availBal': '128.83118060891422', 'availEq': '128.83118060891422', 'borrowFroz': '', 'cashBal': '128.83118060891422', 'ccy': 'USDT', 'clSpotInUseAmt': '', 'colBorrAutoConversion': '0', 'colRes': '0', 'collateralEnabled': False, 'collateralRestrict': False, 'crossLiab': '', 'disEq': '0', 'eq': '128.83118060891422', 'eqUsd': '128.83246892072032', 'fixedBal': '0', 'frozenBal': '0', 'imr': '0', 'interest': '', 'isoEq': '0', 'isoLiab': '', 'isoUpl': '0', 'liab': '', 'maxLoan': '', 'maxSpotInUse': '', 'mgnRatio': '', 'mmr': '0', 'notionalLever': '0', 'openAvgPx': '', 'ordFrozen': '0', 'rewardBal': '0', 'smtSyncEq': '0', 'spotBal': '', 'spotCopyTradingEq': '0', 'spotInUseAmt': '', 'spotIsoBal': '0', 'spotUpl': '', 'spotUplRatio': '', 'stgyEq': '0', 'totalPnl': '', 'totalPnlRatio': '', 'twap': '0', 'uTime': '1756637267152', 'upl': '0', 'uplLiab': ''}, {'accAvgPx': '', 'autoLendAmt': '0', 'autoLendMtAmt': '0', 'autoLendStatus': 'unsupported', 'availBal': '0.0000006147597398', 'availEq': '0.0000006147597398', 'borrowFroz': '', 'cashBal': '0.0000006147597398', 'ccy': 'DOGE', 'clSpotInUseAmt': '', 'colBorrAutoConversion': '0', 'colRes': '0', 'collateralEnabled': False, 'collateralRestrict': False, 'crossLiab': '', 'disEq': '0', 'eq': '0.0000006147597398', 'eqUsd': '0.0000001290319218', 'fixedBal': '0', 'frozenBal': '0', 'imr': '0', 'interest': '', 'isoEq': '0', 'isoLiab': '', 'isoUpl': '0', 'liab': '', 'maxLoan': '', 'maxSpotInUse': '', 'mgnRatio': '', 'mmr': '0', 'notionalLever': '0', 'openAvgPx': '', 'ordFrozen': '0', 'rewardBal': '0', 'smtSyncEq': '0', 'spotBal': '', 'spotCopyTradingEq': '0', 'spotInUseAmt': '', 'spotIsoBal': '0', 'spotUpl': '', 'spotUplRatio': '', 'stgyEq': '0', 'totalPnl': '', 'totalPnlRatio': '', 'twap': '0', 'uTime': '1755447334452', 'upl': '0', 'uplLiab': ''}], 'imr': '', 'isoEq': '0', 'mgnRatio': '', 'mmr': '', 'notionalUsd': '', 'notionalUsdForBorrow': '', 'notionalUsdForFutures': '', 'notionalUsdForOption': '', 'notionalUsdForSwap': '', 'ordFroz': '', 'totalEq': '128.83246904975223', 'uTime': '1756700967986', 'upl': ''}], 'msg': ''}
2025-09-01 12:29:28,490 - __main__ - ERROR - 测试失败!
2025-09-01 12:29:28,490 - __main__ - INFO - 测试程序结束
2025-09-01 12:30:16,563 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:30:16,563 - __main__ - INFO - ============================================================
2025-09-01 12:30:16,563 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:30:16,563 - __main__ - INFO - ============================================================
2025-09-01 12:30:16,564 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:30:16,564 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:30:17,596 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:30:17,596 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:30:18,630 - __main__ - INFO - 连接测试成功
2025-09-01 12:30:18,630 - __main__ - INFO - 
--- 测试2: 账户余额 ---
2025-09-01 12:30:19,115 - __main__ - INFO - USDT余额: 128.83118060891422
2025-09-01 12:30:19,115 - __main__ - INFO - 
--- 测试3: 合约信息 ---
2025-09-01 12:30:19,481 - core.okx_client - INFO - 获取产品信息成功 - BTC-USDT-SWAP, 面值: 0.01 BTC
2025-09-01 12:30:19,482 - __main__ - ERROR - 合约信息获取失败: {'success': True, 'data': {'instId': 'BTC-USDT-SWAP', 'instType': 'SWAP', 'ctVal': '0.01', 'ctValCcy': 'BTC', 'tickSz': '0.1', 'lotSz': '0.01', 'minSz': '0.01', 'lever': '100', 'source': 'okx_api', 'raw_data': {'auctionEndTime': '', 'baseCcy': '', 'contTdSwTime': '', 'ctMult': '1', 'ctType': 'linear', 'ctVal': '0.01', 'ctValCcy': 'BTC', 'expTime': '', 'futureSettlement': False, 'instFamily': 'BTC-USDT', 'instId': 'BTC-USDT-SWAP', 'instIdCode': 10459, 'instType': 'SWAP', 'lever': '100', 'listTime': '1573557408000', 'lotSz': '0.01', 'maxIcebergSz': '100000000.0000000000000000', 'maxLmtAmt': '20000000', 'maxLmtSz': '100000000', 'maxMktAmt': '', 'maxMktSz': '12000', 'maxStopSz': '12000', 'maxTriggerSz': '100000000.0000000000000000', 'maxTwapSz': '100000000.0000000000000000', 'minSz': '0.01', 'openType': '', 'optType': '', 'preMktSwTime': '', 'quoteCcy': '', 'ruleType': 'normal', 'settleCcy': 'USDT', 'state': 'live', 'stk': '', 'tickSz': '0.1', 'tradeQuoteCcyList': [], 'uly': 'BTC-USDT'}}}
2025-09-01 12:30:19,484 - __main__ - ERROR - 测试失败!
2025-09-01 12:30:19,484 - __main__ - INFO - 测试程序结束
2025-09-01 12:30:44,557 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:30:44,557 - __main__ - INFO - ============================================================
2025-09-01 12:30:44,557 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:30:44,557 - __main__ - INFO - ============================================================
2025-09-01 12:30:44,557 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:30:44,558 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:30:45,590 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:30:45,590 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:30:46,479 - __main__ - INFO - 连接测试成功
2025-09-01 12:30:46,479 - __main__ - INFO - 
--- 测试2: 账户余额 ---
2025-09-01 12:30:46,830 - __main__ - INFO - USDT余额: 128.83118060891422
2025-09-01 12:30:46,830 - __main__ - INFO - 
--- 测试3: 合约信息 ---
2025-09-01 12:30:47,204 - core.okx_client - INFO - 获取产品信息成功 - BTC-USDT-SWAP, 面值: 0.01 BTC
2025-09-01 12:30:47,204 - __main__ - INFO - 合约: BTC-USDT-SWAP
2025-09-01 12:30:47,204 - __main__ - INFO - 面值: 0.01 BTC
2025-09-01 12:30:47,204 - __main__ - INFO - 最小张数: 0.01
2025-09-01 12:30:47,204 - __main__ - INFO - 张数精度: 0.01
2025-09-01 12:30:47,204 - __main__ - INFO - 价格精度: 0.1
2025-09-01 12:30:47,204 - __main__ - INFO - 
--- 测试4: 当前价格 ---
2025-09-01 12:30:48,028 - __main__ - INFO - 当前价格: 107378.1
2025-09-01 12:30:48,028 - __main__ - INFO - 
--- 测试5: 计算订单参数 ---
2025-09-01 12:30:48,029 - __main__ - INFO - 目标仓位价值: 100.0 USDT
2025-09-01 12:30:48,029 - __main__ - INFO - 需要合约数量: 0.093129
2025-09-01 12:30:48,029 - __main__ - INFO - 调整后数量: 0.093129
2025-09-01 12:30:48,029 - __main__ - INFO - 最终数量: 0.1
2025-09-01 12:30:48,029 - __main__ - INFO - 实际仓位价值: 107.38 USDT
2025-09-01 12:30:48,029 - __main__ - INFO - 
--- 测试6: 设置杠杆 ---
2025-09-01 12:30:48,377 - __main__ - INFO - 杠杆设置成功: 2x
2025-09-01 12:30:48,378 - __main__ - INFO - 
--- 测试7: 简单市价单下单 ---
2025-09-01 12:30:48,378 - __main__ - INFO - 准备下单参数:
2025-09-01 12:30:48,378 - __main__ - INFO -   合约: BTC-USDT-SWAP
2025-09-01 12:30:48,378 - __main__ - INFO -   方向: buy (做多)
2025-09-01 12:30:48,378 - __main__ - INFO -   数量: 0 张
2025-09-01 12:30:48,378 - __main__ - INFO -   类型: market (市价单)
2025-09-01 12:30:48,378 - __main__ - INFO -   模式: cross (全仓)
2025-09-01 12:30:48,378 - __main__ - ERROR - 下单异常: EOF when reading a line
2025-09-01 12:30:48,379 - __main__ - ERROR - 测试失败!
2025-09-01 12:30:48,379 - __main__ - INFO - 测试程序结束
2025-09-01 12:31:11,191 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:31:11,191 - __main__ - INFO - ============================================================
2025-09-01 12:31:11,191 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:31:11,191 - __main__ - INFO - ============================================================
2025-09-01 12:31:11,192 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:31:11,192 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:31:12,224 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:31:12,224 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:31:13,102 - __main__ - INFO - 连接测试成功
2025-09-01 12:31:13,102 - __main__ - INFO - 
--- 测试2: 账户余额 ---
2025-09-01 12:31:13,457 - __main__ - INFO - USDT余额: 128.83118060891422
2025-09-01 12:31:13,457 - __main__ - INFO - 
--- 测试3: 合约信息 ---
2025-09-01 12:31:13,843 - core.okx_client - INFO - 获取产品信息成功 - BTC-USDT-SWAP, 面值: 0.01 BTC
2025-09-01 12:31:13,843 - __main__ - INFO - 合约: BTC-USDT-SWAP
2025-09-01 12:31:13,843 - __main__ - INFO - 面值: 0.01 BTC
2025-09-01 12:31:13,843 - __main__ - INFO - 最小张数: 0.01
2025-09-01 12:31:13,843 - __main__ - INFO - 张数精度: 0.01
2025-09-01 12:31:13,843 - __main__ - INFO - 价格精度: 0.1
2025-09-01 12:31:13,843 - __main__ - INFO - 
--- 测试4: 当前价格 ---
2025-09-01 12:31:14,684 - __main__ - INFO - 当前价格: 107375.6
2025-09-01 12:31:14,685 - __main__ - INFO - 
--- 测试5: 计算订单参数 ---
2025-09-01 12:31:14,685 - __main__ - INFO - 目标仓位价值: 100.0 USDT
2025-09-01 12:31:14,685 - __main__ - INFO - 需要合约数量: 0.093131
2025-09-01 12:31:14,685 - __main__ - INFO - 调整后数量: 0.093131
2025-09-01 12:31:14,685 - __main__ - INFO - 最终数量: 0.1
2025-09-01 12:31:14,685 - __main__ - INFO - 实际仓位价值: 107.38 USDT
2025-09-01 12:31:14,685 - __main__ - INFO - 
--- 测试6: 设置杠杆 ---
2025-09-01 12:31:15,052 - __main__ - INFO - 杠杆设置成功: 2x
2025-09-01 12:31:15,052 - __main__ - INFO - 
--- 测试7: 简单市价单下单 ---
2025-09-01 12:31:15,052 - __main__ - INFO - 准备下单参数:
2025-09-01 12:31:15,053 - __main__ - INFO -   合约: BTC-USDT-SWAP
2025-09-01 12:31:15,053 - __main__ - INFO -   方向: buy (做多)
2025-09-01 12:31:15,053 - __main__ - INFO -   数量: 0.1 张
2025-09-01 12:31:15,053 - __main__ - INFO -   类型: market (市价单)
2025-09-01 12:31:15,053 - __main__ - INFO -   模式: cross (全仓)
2025-09-01 12:31:15,920 - __main__ - INFO - 下单结果: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2825238728533155845', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1756701075409'}], 'inTime': '1756701075409201', 'msg': '', 'outTime': '1756701075411072'}
2025-09-01 12:31:15,920 - __main__ - INFO - 下单成功!
2025-09-01 12:31:15,920 - __main__ - INFO - 订单ID: 2825238728533155845
2025-09-01 12:31:15,921 - __main__ - INFO - 测试成功完成!
2025-09-01 12:31:15,921 - __main__ - INFO - 测试程序结束
2025-09-01 12:32:05,989 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:32:05,990 - __main__ - INFO - ============================================================
2025-09-01 12:32:05,990 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:32:05,990 - __main__ - INFO - ============================================================
2025-09-01 12:32:05,990 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:32:05,990 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:32:07,048 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:32:07,048 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:32:07,922 - __main__ - INFO - 连接测试成功
2025-09-01 12:32:07,922 - __main__ - INFO - 
--- 测试2: 账户余额 ---
2025-09-01 12:32:08,270 - __main__ - INFO - USDT余额: 75.07848010891423
2025-09-01 12:32:08,270 - __main__ - INFO - 
--- 测试3: 合约信息 ---
2025-09-01 12:32:08,650 - core.okx_client - INFO - 获取产品信息成功 - BTC-USDT-SWAP, 面值: 0.01 BTC
2025-09-01 12:32:08,650 - __main__ - INFO - 合约: BTC-USDT-SWAP
2025-09-01 12:32:08,650 - __main__ - INFO - 面值: 0.01 BTC
2025-09-01 12:32:08,650 - __main__ - INFO - 最小张数: 0.01
2025-09-01 12:32:08,650 - __main__ - INFO - 张数精度: 0.01
2025-09-01 12:32:08,651 - __main__ - INFO - 价格精度: 0.1
2025-09-01 12:32:08,651 - __main__ - INFO - 
--- 测试4: 当前价格 ---
2025-09-01 12:32:09,588 - __main__ - INFO - 当前价格: 107405.0
2025-09-01 12:32:09,589 - __main__ - INFO - 
--- 测试5: 计算订单参数 ---
2025-09-01 12:32:09,589 - __main__ - INFO - 目标仓位价值: 100.0 USDT
2025-09-01 12:32:09,589 - __main__ - INFO - 需要合约数量: 0.093106
2025-09-01 12:32:09,589 - __main__ - INFO - 调整后数量: 0.093106
2025-09-01 12:32:09,589 - __main__ - INFO - 最终数量: 0.1
2025-09-01 12:32:09,589 - __main__ - INFO - 实际仓位价值: 107.41 USDT
2025-09-01 12:32:09,589 - __main__ - INFO - 
--- 测试6: 设置杠杆 ---
2025-09-01 12:32:09,979 - __main__ - INFO - 杠杆设置成功: 2x
2025-09-01 12:32:09,979 - __main__ - INFO - 
--- 测试7: 简单市价单下单 ---
2025-09-01 12:32:09,979 - __main__ - INFO - 准备下单参数:
2025-09-01 12:32:09,979 - __main__ - INFO -   合约: BTC-USDT-SWAP
2025-09-01 12:32:09,979 - __main__ - INFO -   方向: buy (做多)
2025-09-01 12:32:09,980 - __main__ - INFO -   数量: 0.1 张
2025-09-01 12:32:09,980 - __main__ - INFO -   类型: market (市价单)
2025-09-01 12:32:09,980 - __main__ - INFO -   模式: cross (全仓)
2025-09-01 12:32:26,449 - __main__ - INFO - 下单结果: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2825241095127244800', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1756701145939'}], 'inTime': '1756701145939168', 'msg': '', 'outTime': '1756701145940779'}
2025-09-01 12:32:26,449 - __main__ - INFO - 下单成功!
2025-09-01 12:32:26,449 - __main__ - INFO - 订单ID: 2825241095127244800
2025-09-01 12:32:26,450 - __main__ - INFO - 测试成功完成!
2025-09-01 12:32:26,451 - __main__ - INFO - 测试程序结束
2025-09-01 12:35:11,106 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:35:11,106 - __main__ - INFO - 开始基础下单测试...
2025-09-01 12:35:11,106 - __main__ - INFO - ============================================================
2025-09-01 12:35:11,107 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:35:11,107 - __main__ - INFO - ============================================================
2025-09-01 12:35:11,107 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:35:11,107 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:35:12,185 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:35:12,185 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:35:23,339 - core.okx_client - ERROR - 获取账户余额失败: [Errno 11001] getaddrinfo failed
2025-09-01 12:35:23,339 - __main__ - ERROR - 连接测试异常: [Errno 11001] getaddrinfo failed
2025-09-01 12:35:23,339 - __main__ - ERROR - 基础测试失败!
2025-09-01 12:35:23,339 - __main__ - INFO - 测试程序结束
2025-09-01 12:36:17,252 - __main__ - INFO - OKX下单测试程序启动
2025-09-01 12:36:17,252 - __main__ - INFO - 开始基础下单测试...
2025-09-01 12:36:17,252 - __main__ - INFO - ============================================================
2025-09-01 12:36:17,252 - __main__ - INFO - 开始测试OKX下单功能
2025-09-01 12:36:17,252 - __main__ - INFO - ============================================================
2025-09-01 12:36:17,252 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:36:17,252 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:36:18,317 - __main__ - INFO - OKX客户端初始化成功 (沙盒模式: False)
2025-09-01 12:36:18,317 - __main__ - INFO - 
--- 测试1: 基础连接和权限 ---
2025-09-01 12:36:19,156 - __main__ - INFO - 连接测试成功
2025-09-01 12:36:19,156 - __main__ - INFO - 
--- 测试2: 账户余额 ---
2025-09-01 12:36:19,492 - __main__ - INFO - USDT余额: 128.56472735891424
2025-09-01 12:36:19,492 - __main__ - INFO - 
--- 测试3: 合约信息 ---
2025-09-01 12:36:19,855 - core.okx_client - INFO - 获取产品信息成功 - BTC-USDT-SWAP, 面值: 0.01 BTC
2025-09-01 12:36:19,855 - __main__ - INFO - 合约: BTC-USDT-SWAP
2025-09-01 12:36:19,855 - __main__ - INFO - 面值: 0.01 BTC
2025-09-01 12:36:19,855 - __main__ - INFO - 最小张数: 0.01
2025-09-01 12:36:19,855 - __main__ - INFO - 张数精度: 0.01
2025-09-01 12:36:19,855 - __main__ - INFO - 价格精度: 0.1
2025-09-01 12:36:19,855 - __main__ - INFO - 
--- 测试4: 当前价格 ---
2025-09-01 12:36:20,700 - __main__ - INFO - 当前价格: 107251.9
2025-09-01 12:36:20,701 - __main__ - INFO - 
--- 测试5: 计算订单参数 ---
2025-09-01 12:36:20,701 - __main__ - INFO - 目标仓位价值: 100.0 USDT
2025-09-01 12:36:20,701 - __main__ - INFO - 需要合约数量: 0.093238
2025-09-01 12:36:20,701 - __main__ - INFO - 调整后数量: 0.093238
2025-09-01 12:36:20,701 - __main__ - INFO - 最终数量: 0.1
2025-09-01 12:36:20,701 - __main__ - INFO - 实际仓位价值: 107.25 USDT
2025-09-01 12:36:20,701 - __main__ - INFO - 
--- 测试6: 设置杠杆 ---
2025-09-01 12:36:21,061 - __main__ - INFO - 杠杆设置成功: 2x
2025-09-01 12:36:21,061 - __main__ - INFO - 
--- 测试7: 简单市价单下单 ---
2025-09-01 12:36:21,061 - __main__ - INFO - 准备下单参数:
2025-09-01 12:36:21,061 - __main__ - INFO -   合约: BTC-USDT-SWAP
2025-09-01 12:36:21,061 - __main__ - INFO -   方向: buy (做多)
2025-09-01 12:36:21,061 - __main__ - INFO -   数量: 0.1 张
2025-09-01 12:36:21,062 - __main__ - INFO -   类型: market (市价单)
2025-09-01 12:36:21,062 - __main__ - INFO -   模式: cross (全仓)
2025-09-01 12:36:32,018 - __main__ - INFO - 下单结果: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2825249334887784448', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1756701391503'}], 'inTime': '1756701391502325', 'msg': '', 'outTime': '1756701391503949'}
2025-09-01 12:36:32,019 - __main__ - INFO - 下单成功!
2025-09-01 12:36:32,019 - __main__ - INFO - 订单ID: 2825249334887784448
2025-09-01 12:36:32,020 - __main__ - INFO - 基础测试成功!
2025-09-01 12:36:35,111 - __main__ - INFO - 
开始止盈止损测试...
2025-09-01 12:36:35,111 - __main__ - INFO - 
============================================================
2025-09-01 12:36:35,111 - __main__ - INFO - 测试止盈止损下单功能
2025-09-01 12:36:35,112 - __main__ - INFO - ============================================================
2025-09-01 12:36:35,112 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:36:35,112 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:36:36,138 - __main__ - INFO - OKX客户端初始化成功
2025-09-01 12:36:37,013 - core.okx_client - INFO - 获取产品信息成功 - BTC-USDT-SWAP, 面值: 0.01 BTC
2025-09-01 12:36:37,877 - __main__ - INFO - 当前价格: 107245.1
2025-09-01 12:36:37,878 - __main__ - INFO - 
--- 计算止盈止损价格 ---
2025-09-01 12:36:37,878 - __main__ - INFO - 入场价格: 107245.1
2025-09-01 12:36:37,878 - __main__ - INFO - 止损价格: 105636.42 (1.5%)
2025-09-01 12:36:37,878 - __main__ - INFO - 止盈价格: 109658.11 (2.2%)
2025-09-01 12:36:37,878 - __main__ - INFO - 
合约计算:
2025-09-01 12:36:37,879 - __main__ - INFO -   目标价值: 50.0 USDT
2025-09-01 12:36:37,879 - __main__ - INFO -   合约数量: 0.05
2025-09-01 12:36:37,879 - __main__ - INFO -   实际价值: 53.62 USDT
2025-09-01 12:36:37,879 - __main__ - INFO - 
--- 带止盈止损的下单测试 ---
2025-09-01 12:36:48,354 - __main__ - INFO - 执行带止盈止损的下单...
2025-09-01 12:36:48,354 - core.okx_client - INFO - 下单附带止盈止损:
2025-09-01 12:36:48,354 - core.okx_client - INFO -   止盈触发价: 109658.11475000001
2025-09-01 12:36:48,354 - core.okx_client - INFO -   止损触发价: 105636.4235
2025-09-01 12:36:49,212 - __main__ - INFO - 下单结果: {'code': '0', 'data': [{'clOrdId': '', 'ordId': '2825249911923351552', 'sCode': '0', 'sMsg': 'Order placed', 'tag': '', 'ts': '1756701408700'}], 'inTime': '1756701408699458', 'msg': '', 'outTime': '1756701408701218'}
2025-09-01 12:36:49,212 - __main__ - INFO - 止盈止损下单成功!
2025-09-01 12:36:49,212 - __main__ - INFO - 订单ID: 2825249911923351552
2025-09-01 12:36:49,213 - __main__ - INFO - 
开始手续费计算测试...
2025-09-01 12:36:49,213 - __main__ - INFO - 
============================================================
2025-09-01 12:36:49,213 - __main__ - INFO - 测试手续费计算功能
2025-09-01 12:36:49,213 - __main__ - INFO - ============================================================
2025-09-01 12:36:49,214 - __main__ - INFO - 找到配置文件: live_trading/config/trading_config.json
2025-09-01 12:36:49,214 - core.okx_client - INFO - 初始化实盘模式客户端（真实资金）
2025-09-01 12:36:50,244 - __main__ - INFO - OKX客户端初始化成功
2025-09-01 12:36:50,245 - __main__ - INFO - 
--- 获取实时费率 ---
2025-09-01 12:36:51,146 - core.okx_client - INFO - 获取手续费费率成功 - 等级: Lv1, 挂单: 0.0200%, 吃单: 0.0500%
2025-09-01 12:36:51,147 - __main__ - ERROR - 获取费率失败: {'success': True, 'data': {'level': 'Lv1', 'maker_rate': 0.0002, 'taker_rate': 0.0005, 'instType': 'SWAP', 'source': 'okx_api', 'raw_response': {'category': '1', 'delivery': '', 'exercise': '', 'fiat': [], 'instType': 'SWAP', 'level': 'Lv1', 'maker': '-0.0002', 'makerU': '-0.0002', 'makerUSDC': '-0.0002', 'ruleType': 'normal', 'taker': '-0.0005', 'takerU': '-0.0005', 'takerUSDC': '-0.0005', 'ts': '1756701410632'}}}
2025-09-01 12:36:51,149 - __main__ - WARNING - 
部分测试未完全通过，请检查相关功能
2025-09-01 12:36:51,149 - __main__ - INFO - 测试程序结束
